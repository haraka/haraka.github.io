{"_path":"/core/Connection","_dir":"core","_draft":false,"_partial":false,"_locale":"","title":"Connection Object","description":"For each connection to Haraka there is one connection object.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"connection-object"},"children":[{"type":"text","value":"Connection Object"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For each connection to Haraka there is one connection object."}]},{"type":"element","tag":"h2","props":{"id":"api"},"children":[{"type":"text","value":"API"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.uuid"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A unique UUID for this connection."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.remote - info about the host that is connecting to Haraka."},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ip   - remote IP address"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host - reverse DNS of the remote hosts IP"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"is_private - true if the remote IP is from a private (loopback, RFC 1918, link local, etc.) IP address."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"is_local - true if the remote IP is localhost (loopback, link local)"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.local - info about the host that is running Haraka"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ip - the IP of the Haraka server, as reported by the OS"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"port - the port number handling the connection."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host - the rDNS host name of the local IP"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.proxy - proxy properties set when a proxy is used (like haproxy)"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"allowed - if the remote IP has proxy permission"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ip - when proxied, the proxy servers IP address"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"type - currently null or 'haproxy'"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.hello"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"verb - Either 'EHLO' or 'HELO' whichever the remote end used"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"host - The hostname given with HELO or EHLO"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.notes"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An object which persists during the lifetime of the connection. It is used to store connection-specific properties. See also, connection.results and "},{"type":"element","tag":"a","props":{"href":"https://github.com/haraka/haraka-notes","rel":["nofollow"]},"children":[{"type":"text","value":"haraka-notes"}]},{"type":"text","value":"."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.transaction"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The current transaction object, valid after MAIL FROM, and destroyed at queue\ntime, RSET time, or if MAIL FROM was rejected. See the Transaction Object\ndocumentation file."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.relaying"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A boolean flag to say whether this connection is allowed to relay mails (i.e.\ndeliver mails outbound). This is normally set by SMTP AUTH, or sometimes via\nan IP address check."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.current_line"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For low level use. Contains the current line sent from the remote end,\nverbatim as it was sent. Can be useful in certain botnet detection techniques."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.last_response"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Contains the last SMTP response sent to the client."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.remote_closed"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For low level use.  This value is set when the remote host drops the connection."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.results"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Store results of processing in a structured format. See "},{"type":"element","tag":"a","props":{"href":"/core/Results"},"children":[{"type":"text","value":"docs/Results"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"api","depth":2,"text":"API"}]}},"_type":"markdown","_id":"content:6.core:4.Connection.md","_source":"content","_file":"6.core/4.Connection.md","_stem":"6.core/4.Connection","_extension":"md"}