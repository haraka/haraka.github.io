{"_path":"/plugins/dnswl","_dir":"plugins","_draft":false,"_partial":false,"_locale":"","title":"dnswl - DNSWL plugin for Haraka","description":"Haraka dnswl plugin - DNSWL","navigation":{"title":"dnswl"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"dnswl-plugin"},"children":[{"type":"text","value":"dnswl plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin looks up the connecting IP address in an IP whitelist.\nIf the host is listed, then the plugin will return OK for all hooks\nup to hook_data."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"IMPORTANT!  The order of plugins in config/plugins is important when\nthis plugin is used.  It should be listed "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"before"}]},{"type":"text","value":" any plugins that\nyou wish to skip, but after any plugins that accept recipients."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugins uses the following files:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"dnswl.zones - Contains a list of zones to query, one per line."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"dnswl.ini - INI format with options described below:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"zones"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"A comma or semi-colon list of zones to query.  It will be merged with\nany lists in dnswl.zones."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"periodic_checks"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"If enabled, this will check all the zones every n minutes.\nThe minimum value that will be accepted here is 5.  Any value less\nthan 5 will cause the checks to be run at start-up only."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The checks confirm that the list is responding and that it is not\nlisting the world.  If any errors are detected, then the zone is\ndisabled and will be re-checked on the next test.  If a zone\nsubsequently starts working correctly then it will be re-enabled."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"enable_stats"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"To use this feature you must have installed the 'redis' module and\nhave a redis server running."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"When enabled, this will record several list statistics to redis."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"It will track the total number of queries (TOTAL) and the average\nresponse time (AVG_RT) and the return type (e.g. LISTED or ERROR)\nto a redis hash where the key is 'dns-list-stat:zone' and the hash\nfield is the response type."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"It will also track the positive response overlap between the lists\nin another redis hash where the key is 'dns-list-overlap:zone' and\nthe hash field is the other list names."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Example:"},{"type":"text","value":"\n  "},{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"redis 127.0.0.1:6379> hgetall dns-list-stat:zen.spamhaus.org\n  1) \"TOTAL\"\n  2) \"23\"\n  3) \"ENOTFOUND\"\n  4) \"11\"\n  5) \"LISTED\"\n  6) \"12\"\n  7) \"AVG_RT\"\n  8) \"45.5\"\n  redis 127.0.0.1:6379> hgetall dns-list-overlap:zen.spamhaus.org\n  1) \"b.barracudacentral.org\"\n  2) \"1\"\n  3) \"bl.spamcop.net\"\n  4) \"1\"\n  5) \"TOTAL\"\n  6) \"1\"\n  "}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"stats_redis_host"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"In the form of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"host:port"}]},{"type":"text","value":" this option allows you to specify a different\nhost on which redis runs."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"configuration","depth":2,"text":"Configuration"}]}},"_type":"markdown","_id":"content:8.plugins:dnswl.md","_source":"content","_file":"8.plugins/dnswl.md","_stem":"8.plugins/dnswl","_extension":"md"}