{"_path":"/plugins/queue/discard","_dir":"queue","_draft":false,"_partial":false,"_locale":"","title":"discard - Discard mail","description":"Haraka discard plugin - Discard mail","navigation":{"title":"discard"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"discard-plugin"},"children":[{"type":"text","value":"discard plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin will discard a message by pretending that the message was queued."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is designed to be used by other plugins which request the message be\ndiscard by setting a connection or transaction note that this plugin\nchecks."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It uses the 'queue' hook, so it runs after all the plugins that hook on "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"data_post"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you use the 'quarantine' plug-in then this plugin should run "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"after"}]},{"type":"text","value":" it."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"USE THIS PLUGIN WITH CARE!"}]},{"type":"element","tag":"h1","props":{"id":"enable"},"children":[{"type":"text","value":"Enable"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Enable by adding a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"queue/discard"}]},{"type":"text","value":" entry in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"config/plugins"}]},{"type":"text","value":" "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"before"}]},{"type":"text","value":" your\nother queue plugins that perform actual deliveries."}]},{"type":"element","tag":"h1","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Set"}]},{"type":"element","tag":"pre","props":{"className":"language-javascript shiki shiki-themes github-dark github-light","code":"connection.notes.discard = [ 1 | true ];\n","language":"javascript","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"connection.notes.discard "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" [ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" true"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" ];\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"or"}]},{"type":"element","tag":"pre","props":{"className":"language-javascript shiki shiki-themes github-dark github-light","code":"connection.transaction.notes.discard = [ 1 | true ];\n","language":"javascript","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"connection.transaction.notes.discard "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" [ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#79B8FF;--shiki-default:#005CC5"},"children":[{"type":"text","value":" true"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" ];\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:8.plugins:queue:discard.md","_source":"content","_file":"8.plugins/queue/discard.md","_extension":"md"}