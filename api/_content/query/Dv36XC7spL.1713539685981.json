{"_path":"/core/Logging_API","_dir":"core","_draft":false,"_partial":false,"_locale":"","title":"Logging API","description":"Logging conventions within Haraka","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"logging-api"},"children":[{"type":"text","value":"Logging API"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Logging conventions within Haraka"}]},{"type":"element","tag":"h2","props":{"id":"see-also"},"children":[{"type":"text","value":"See also"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":""},"children":[{"type":"text","value":"https://github.com/haraka/Haraka/pull/119"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"logline will always always be in the form:"}]},{"type":"element","tag":"pre","props":{"className":"language-text shiki shiki-themes github-dark github-light","code":"[level] [connection uuid] [origin] message\n","language":"text","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[level] [connection uuid] [origin] message\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"where origin is \"haraka_core\" or the name of the plugin which\ntriggered the message, and \"connection uuid\" is the ID of the\nconnection associated with the message."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"when calling a log method on logger, you should provide the\nplugin object and the connection object anywhere in the arguments\nto the log method."}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark github-light","code":"logger.logdebug(\"i like turtles\", plugin, connection);\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"logger."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"logdebug"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"\"i like turtles\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", plugin, connection);\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"will yield, for example,"}]},{"type":"element","tag":"pre","props":{"className":"language-text shiki shiki-themes github-dark github-light","code":"[DEBUG] [7F1C820F-DC79-4192-9AA6-5307354B20A6] [dnsbl] i like turtles\n","language":"text","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[DEBUG] [7F1C820F-DC79-4192-9AA6-5307354B20A6] [dnsbl] i like turtles\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"if you call the log method on the connection object, you can\nforego the connection as argument:"}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark github-light","code":"connection.logdebug(\"turtles all the way down\", plugin);\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"connection."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"logdebug"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"\"turtles all the way down\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", plugin);\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"and similarly for the log methods on the plugin object:"}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark github-light","code":"plugin.logdebug(\"he just really likes turtles\", connection);\n","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"plugin."}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"logdebug"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#9ECBFF;--shiki-default:#032F62"},"children":[{"type":"text","value":"\"he just really likes turtles\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":", connection);\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"failing to provide a connection and/or plugin object will leave\nthe default values in the log (currently \"core\" and\n\"no_connection\")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"this is implemented by testing for argument type in\nthe logger.js log* method. objects-as-arguments are then sniffed\nto try to determine if they're a connection or plugin instance."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"see-also","depth":2,"text":"See also"}]}},"_type":"markdown","_id":"content:6.core:8.Logging_API.md","_source":"content","_file":"6.core/8.Logging_API.md","_extension":"md"}