{"_path":"/plugins/daemonize","_dir":"plugins","_draft":false,"_partial":false,"_locale":"","title":"daemonize - Daemonize plugin for Haraka","description":"Haraka daemonize plugin - Daemonize","navigation":{"title":"daemonize"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"daemonize-plugin"},"children":[{"type":"text","value":"daemonize plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"IMPORTANT NOTE: This plugin should not be used any more and it will\nthrow an error and prevent Haraka from starting."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nDaemonization is now built into Haraka.  If the 'daemon' module is\ninstalled you simply set daemonize=true in config/smtp.ini now."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To use this plugin you have to install the 'daemon' module by running\n'npm install daemon' in your Haraka configuration directory."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf daemon is not found then the plugin will log a notice and Haraka will\ncontinue running in the foreground."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin should be listed at the top of your config/plugins file so that\nHaraka goes into the background before any other plugins are run."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin looks for daemonize.ini in your configuration directory and the\nfollowing options can be set:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"log_file  (default: /var/log/haraka.log)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The file that STDOUT should be redirected to.  It is recommended that\nyou use this plugin with the log.syslog plugin instead."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"pid_file  (default: /var/run/haraka.pid)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"File where the master process PID should be written to.  If this file\ncannot be locked then start-up will fail."}]}]},{"type":"element","tag":"h2","props":{"id":"init-script"},"children":[{"type":"text","value":"Init-Script"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A RedHat/CentOS compatible init-script is provided for use with this module\nwhich can be found in the plugins directory called haraka.init."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIt should be copied to /etc/init.d/haraka and registered with\n'chkconfig --add haraka' to activate haraka at system boot."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The init-script presumes that Haraka is installed as /usr/local/bin/haraka\nand main configuration file is /etc/haraka/config/smtp.ini."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nIf this is not the case on your system, then you should create the file\n/etc/sysconfig/haraka which accepts the following configuration:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"exec  (default: exec=/usr/local/bin/haraka)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The path to Haraka script"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"config  (default: config=/etc/haraka/config/smtp.ini)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The path to the Haraka smtp.ini configuration script"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"max_open_files  (default: 65535)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The maximum number of open files allowed per process.  If you are\nrunning Haraka using the 'cluster' module, then this is the per-child\nlimit."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"configuration","depth":2,"text":"Configuration"},{"id":"init-script","depth":2,"text":"Init-Script"}]}},"_type":"markdown","_id":"content:8.plugins:daemonize.md","_source":"content","_file":"8.plugins/daemonize.md","_stem":"8.plugins/daemonize","_extension":"md"}