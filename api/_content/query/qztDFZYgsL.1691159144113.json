{"_path":"/plugins/relay_force_routing","_dir":"plugins","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"relay_force_routing.js - Force routing of mail to a specific host","description":"Haraka relay_force_routing plugin - Force routing of mail to a specific host","navigation":{"title":"relay_force_routing"},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"relay_force_routing-plugin"},"children":[{"type":"text","value":"relay_force_routing plugin"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This plugin allows you to force the next hop for the configured domains.\nIt works a lot like the transport map of Postfix."}]},{"type":"element","tag":"h2","props":{"id":"configuration"},"children":[{"type":"text","value":"Configuration"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"config/relay_dest_domains.ini"}]},{"type":"text","value":"\nThis config file is shared with relay_acl.js, for the basics see the\ndocumentation provided by plugins/relay_acl.js."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"relay_force_routing.js adds the field \"nexthop\": in the JSON value\nof the domain. The value of \"nexthop\": can be hostname or IP optionally\nfollow by "},{"type":"element","tag":"port","props":{},"children":[]},{"type":"text","value":"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Example:"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"domains"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\ntest.com = { \"action\": \"continue\", \"nexthop\": \"127.0.0.1:2525\" }"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"You can also define a default relay using the \"any\" domain, which will be\nused if the message's destination domain doesn't match any of the domains\nalready defined."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Example:"}]}]},{"type":"element","tag":"code","props":{"className":["language-undefined"],"code":"        [domains]  \n        test.com = { \"action\": \"continue\", \"nexthop\": \"127.0.0.1:2525\" }\n        my.test.com = { \"action\": \"continue\", \"nexthop\": \"127.0.0.1:2527\" }\n        any = { \"action\": \"continue\", \"nexthop\": \"10.10.10.1:2525\"}\n"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        [domains]  \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        test.com = { \"action\": \"continue\", \"nexthop\": \"127.0.0.1:2525\" }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        my.test.com = { \"action\": \"continue\", \"nexthop\": \"127.0.0.1:2527\" }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"        any = { \"action\": \"continue\", \"nexthop\": \"10.10.10.1:2525\"}"}]}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"configuration","depth":2,"text":"Configuration"}]}},"_type":"markdown","_id":"content:8.plugins:relay_force_routing.md","_source":"content","_file":"8.plugins/relay_force_routing.md","_extension":"md"}