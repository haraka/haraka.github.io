{"_path":"/core/CoreConfig","_dir":"core","_draft":false,"_partial":false,"_locale":"","title":"Core Configuration Files","description":"See Logging.","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"a","props":{"href":"/core/Logging"},"children":[{"type":"text","value":"Logging"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Haraka core reads some configuration files to determine a few actions:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"smtp.yaml or smtp.json"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If either of these files exist then they are loaded first.\nThis file is designed to use the JSON/YAML file overrides documented in\n"},{"type":"element","tag":"a","props":{"href":"/core/Config"},"children":[{"type":"text","value":"Config"}]},{"type":"text","value":" to optionally provide the entire configuration in a single file."}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"plugins"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The list of plugins to load"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"smtp.ini"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Keys:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"listen_host, port - the host and port to listen on (default: ::0 and 25)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"listen - (default: "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"::0"}]},{"type":"text","value":":25) Comma separated IP:Port addresses to listen on"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"inactivity_time - how long to let clients idle in seconds (default: 300)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"nodes - specifies how many processes to fork. The string \"cpus\" will fork as many children as there are CPUs (default: 1, which enables cluster mode with a single process)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"user - optionally a user to drop privileges to. Can be a string or UID."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"group - optionally a group to drop privileges to. Can be a string or GID."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"ignore_bad_plugins - If a plugin fails to compile by default Haraka will stop at load time.\nIf, however, you wish to continue on without that plugin's facilities, then\nset this config option"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"daemonize - enable this to cause Haraka to fork into the background on start-up (default: 0)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"daemon_log_file - (default: /var/log/haraka.log) where to redirect stdout/stderr when daemonized"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"daemon_pid_file - (default: /var/run/haraka.pid) where to write a PID file to"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"spool_dir - (default: none) directory to create temporary spool files in"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"spool_after - (default: -1) if message exceeds this size in bytes, then spool the message to disk\nspecify -1 to disable spooling completely or 0 to force all messages to be spooled to disk."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"graceful_shutdown - (default: false) enable this to wait for sockets on shutdown instead of closing them quickly"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"force_shutdown_timeout - (default: 30) number of seconds to wait for a graceful shutdown"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"me"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"A name to use for this server. Used in received lines and elsewhere. Setup\nby default to be your hostname."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"connection.ini"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"See inline comments in connection.ini for the following settings:"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"haproxy.hosts_ipv4"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"haproxy.hosts_ipv6"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"headers.*"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"max.bytes"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"max.line_length"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"max.data_line_length"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"max.mime_parts"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"message.greeting"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"message.close"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"smtputf8"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"strict_rfc1869"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"uuid.deny_chars"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"uuid.banner_bytes"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"plugin_timeout"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Seconds to allow a plugin to run before the next hook is called automatically\ndefault: 30"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Note also that each plugin can have a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"config/<plugin_name>.timeout"}]},{"type":"text","value":"\nfile specifying a per-plugin timeout.  In this file you can set a timeout of 0 to mean that this plugin's hooks never time out.  Use this with care."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"If the plugin is in a sub-directory of plugins, then you must create this file\nin the equivalent path e.g. the queue/smtp_forward would need a timeout file in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"config/queue/smtp_forward.timeout"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"outbound.ini"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"outbound.bounce_message"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The bounce message if delivery of the message fails. The default is normally fine. Bounce messages contain a number of template replacement values which are best discovered by looking at the source code."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:6.core:5.CoreConfig.md","_source":"content","_file":"6.core/5.CoreConfig.md","_stem":"6.core/5.CoreConfig","_extension":"md"}