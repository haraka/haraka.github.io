import j from"./BfroS0Ov.js";import w from"./C9ThMcAz.js";import C from"./CDTixUzx.js";import{d as p,u as S,D as k,P as f,s as b,E as N,G as B,H as l,I as d,J as E,a as O,K as H,L as T,M as m,N as A,O as D,S as U,Q as R,R as W,U as $,p as F,V as I,W as M,c as V,e as y,g,w as P,X as L}from"./ChGJGkax.js";import"./D7-2JMf3.js";import"./9P3INT99.js";import"./DdntUp9X.js";import"./ammzJ6UM.js";const q=p({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup(t,n){return()=>m(d[t.name],t.layoutProps,n.slots)}}),G={name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},J=p({name:"NuxtLayout",inheritAttrs:!1,props:G,setup(t,n){const e=S(),s=k(f),u=!s||s===b()?N():s,o=B(()=>{let a=l(t.name)??u?.meta.layout??"default";return a&&!(a in d)&&t.fallback&&(a=l(t.fallback)),a}),i=E();n.expose({layoutRef:i});const r=e.deferHydration();if(e.isHydrating){const a=e.hooks.hookOnce("app:error",r);O().beforeEach(a)}let c;return()=>{const a=o.value&&o.value in d,v=u?.meta.layoutTransition??H,x=c;return c=o.value,T(a&&v,{default:()=>m(U,{suspensible:!0,onResolve:()=>{D(r)}},{default:()=>m(K,{layoutProps:A(n.attrs,{ref:i}),key:o.value||void 0,name:o.value,shouldProvide:!t.name,isRenderingNewLayout:h=>h!==x&&h===o.value,hasTransition:!!v},n.slots)})}).default()}}}),K=p({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(t,n){const e=t.name;t.shouldProvide&&R($,{isCurrent:u=>e===(u.meta.layout??"default")});const s=k(f);if(s&&s===b()){const u=N(),o={};for(const i in u){const r=i;Object.defineProperty(o,r,{enumerable:!0,get:()=>t.isRenderingNewLayout(t.name)?u[r]:s[r]})}R(f,W(o))}return()=>!e||typeof e=="string"&&!(e in d)?n.slots.default?.():m(q,{key:e,layoutProps:t.layoutProps,name:e},n.slots)}}),Q={class:"document-driven-page"},ae=p({__name:"document-driven",setup(t){const{contentHead:n}=F().public.content,{page:e,layout:s}=I();return e.value,n&&M(e),(_,u)=>{const o=j,i=w,r=C,c=J;return y(),V("div",Q,[g(c,{name:l(s)||"default"},{default:P(()=>[l(e)?(y(),L(i,{key:l(e)._id,value:l(e)},{empty:P(({value:a})=>[g(o,{value:a},null,8,["value"])]),_:1},8,["value"])):(y(),L(r,{key:1}))]),_:1},8,["name"])])}}});export{ae as default};
